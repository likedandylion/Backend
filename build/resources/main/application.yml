# ===================================================================
# Prome Project: 수정된 application.yml (AWS RDS 연결 최종 버전)
# ===================================================================

# 서버 포트 설정
server:
  port: 8080

# Spring Boot 애플리케이션 공통 설정
spring:
  # 애플리케이션 이름 설정
  application:
    name: prome

  # --- 데이터베이스 연결 설정 (AWS RDS) ---
  datasource:
    # DB 연결 URL: AWS RDS 엔드포인트와 DB 이름을 정확히 입력했습니다.
    url: jdbc:mysql://prome.cdm8imocgs3z.us-east-2.rds.amazonaws.com:3306/prome?useSSL=false&serverTimezone=Asia/Seoul&characterEncoding=UTF-8
    # DB 접속 계정: AWS RDS 생성 시 설정한 관리자 계정입니다.
    username: admin
    # DB 접속 비밀번호: AWS RDS 생성 시 설정한 비밀번호입니다.
    password: likedandylion
    driver-class-name: com.mysql.cj.jdbc.Driver

    # HikariCP: 데이터베이스 커넥션 풀 성능 최적화 설정
    hikari:
      max-lifetime: 400000
      idle-timeout: 600000
      connection-timeout: 30000
      maximum-pool-size: 5

  # --- JPA (ORM) 및 Hibernate 설정 ---
  jpa:
    hibernate:
      # ddl-auto: update -> Entity 변경사항을 DB 테이블에 반영합니다.
      ddl-auto: update
    show-sql: true
    properties:
      hibernate:
        dialect: org.hibernate.dialect.MySQL8Dialect
        format_sql: true
    open-in-view: false

# --- JWT (JSON Web Token) 인증 설정 ---
# ※※※ 수정된 부분 ※※※
# spring: 블록 밖으로 이동하여 JwtProperties.java (prefix = "jwt")와 경로를 맞춥니다.
jwt:
  issuer: "prome.com" # JwtProperties.java에 정의된 필드
  secret: 2025year2ndsemesterlikedandylionbabylionproject # JwtProperties.java에 정의된 필드
  access-expiry-seconds: 3600  # 1시간 (JwtProperties.java의 accessExpirySeconds 필드)
  refresh-expiry-seconds: 7200 # 2시간 (JwtProperties.java의 refreshExpirySeconds 필드)

# --- 로깅 레벨 상세 설정 ---
logging:
  level:
    org.hibernate.SQL: info
    org.hibernate.type.descriptor.sql: trace
    org.springframework.jdbc: debug

# --- Swagger (Springdoc OpenAPI 3.0) 설정 ---
springdoc:
  swagger-ui:
    path: /swagger-ui.html
    disable-swagger-default-url: true
    try-it-out-enabled: true
  api-docs:
    path: /api-docs
  default-consumes-media-type: "application/json"
  default-produces-media-type: "application/json"